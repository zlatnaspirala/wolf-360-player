<!DOCTYPE html>
<html lang="en">
  <head>
    <title>three.js visual js</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <style>
      body {
        font-family: Monospace;
        background-color: #000;
        color: #fff;
        margin: 0px;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <!--NORMAL WEBCAM TEXTURES IN 3d -->
    <div style="display:flex;" id="HOLDER_STREAMS">
      <video id="monitor" autoplay width="160" height="120" style=""></video>
      <canvas id="videoImage" width="160" height="120" style=" float:left;"></canvas>
      <video
        mute
        autoplay
        preload="true"
        controls
        id="VIDEO360"
        tabindex="-1"
        style="width: 640px; height: 480px; left: 0px; top: 15px; transform: none;"
        src="res/video360/MegaCoaster.mp4"
      ></video>
    </div>

    <div style="display:flex;">
    <button
      onclick="ROTATE_Y ()"
      id="VIDEO360_ROTATE_Y"
      style="padding:0; opacity: 0.8;display:block;background-repeat:round;background-image:url('res/video360/rotate.png');width:50px;height:50px"
      title="Video options PLAY"
    ></button>
    <button
      onclick="PLAY()"
      id="VIDEO360_PLAY"
      style="padding:0; opacity: 0.8;display:none;background-repeat: no-repeat;background-image:url('res/video360/play.png');width:50px;height:50px"
      title="Video options PLAY"
    ></button>
    <button
      onclick="PAUSE()"
      id="VIDEO360_PAUSE"
      style="padding:0;opacity: 0.8;display:block;background-repeat: no-repeat;background-image:url('res/video360/pause.png');width:50px;height:50px"
      title="Video options PAUSE"
    ></button>
    <button
      onclick="SOUND_ON()"
      id="VIDEO360_SOUND_ON"
      style="padding:0;opacity: 0.8;display:block;background-repeat: no-repeat;background-image:url('res/video360/soundon.png');width:50px;height:50px"
      title="Video options PLAY"
    ></button>
    <button
      onclick="SOUND_OFF()"
      id="VIDEO360_SOUND_OFF"
      style="padding:0;opacity: 0.8;display:none;background-repeat: no-repeat;background-image:url('res/video360/soundoff.png');width:50px;height:50px"
      title="Video options PLAY"
    ></button>
    </div>
    <script src="lib/threejs/three.min.js"></script>
    <script src="lib/threejs/Detector.js"></script>
    <script src="manifest/manifest.js"></script>
    <script src="lib/starter.js"></script>
    <script src="lib/loadScript.js"></script>
    <script src="js/import.js"></script>
    <script src="js/onWindowResize.js"></script>
    <script src="js/render.js"></script>
    <script src="js/camera.js"></script>
    <script src="lib/addShape.js"></script>
    <script src="js/grid.js"></script>
    <script src="lib/text.js"></script>
    <script src="lib/GPUParticleSystem.js" charset="utf-8"></script>

    <script>

      function RESIZE_WINDOW() {

        SYS.DOM.E("VIDEO360_PLAY").style.left = window.innerWidth / 2 - 26 + "px";
        SYS.DOM.E("VIDEO360_PAUSE").style.left = window.innerWidth / 2 - 26 + "px";
        SYS.DOM.E("VIDEO360_SOUND_ON").style.left = window.innerWidth / 2 + 26 + "px";
        SYS.DOM.E("VIDEO360_SOUND_OFF").style.left = window.innerWidth / 2 + 26 + "px";
        SYS.DOM.E("VIDEO360_ROTATE_Y").style.left = window.innerWidth - 60 + "px";

      }

      window.onresize = RESIZE_WINDOW;

      /**
       * @ globals variables
       */
      // SUPER GLOBALS VARIABLE
      var container, camera, controls;
      var clock = new THREE.Clock(true);
      var mouse = new THREE.Vector2();
      var INTERSECTED;
      var scene = new THREE.Scene();

      renderer = new THREE.WebGLRenderer({ antialias: PROGRAM.ANTIALIAS });

      window.onload = function() {
        init();
        render();
      };

      function init() {

        var position = { x: 0, y: 455, z: -150 };

        CAMERA_INIT(position);

        directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(0, 0, 1).normalize();
        directionalLight.position.set(0, 400, 0);
        directionalLight.castShadow = true;

        directionalLight.shadow.mapSize.width = 1024;
        directionalLight.shadow.mapSize.height = 512;
        directionalLight.shadow.camera.near = 100;
        directionalLight.shadow.camera.far = 1200;
        directionalLight.shadow.camera.top = 350;
        directionalLight.shadow.camera.bottom = -350;
        directionalLight.shadow.camera.right = 1000;
        directionalLight.shadow.camera.left = -1000;
        scene.add(directionalLight);

        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.addEventListener("change", render);
        controls.maxPolarAngle = Math.PI;
        controls.enableZoom = true;
        controls.enablePan = false;
        controls.minZoom = 500;
        controls.maxZoom = 4000;
        controls.autoRotate = false;
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        if (PROGRAM.SKY == true) {
          initSky(false);
        }

        animate();
        window.addEventListener("resize", onWindowResize, false);

        setTimeout(function(){
          INCLUDE.SCRIPT("application/youtube.js");
        }, 2000)

      }

    </script>
  </body>
</html>
